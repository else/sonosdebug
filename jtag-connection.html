<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { (function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a,d;window.performance&&(d=(a=window.performance.timing)&&a.responseStart);var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",d),
b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="https://www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/08cb00/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/sonosdebug/jtag-connection","deleted":false,"title":"JTAG Connection","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/08cb00/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":false,"pageSharingId":"jotspot_page","enableUniversalAnalytics":true,"sharingPolicy":"OPENED","siteTitle":"Sonos Debug","adsensePublisherId":null,"features":{"validateClientGvizDataSourceUrls":true,"contactStoreMigrationPollForGapi":true,"gapiLoaderUtil":true,"moreMobileStyleImprovements":true,"accumulativeBubblePanelCreation":true,"oAuthForChartsApi":true,"batchFileCabinetOperations":true,"fileCabinetScreenReaderFix":true,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":true,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/sonosdebug/jtag-connection\u0026service\u003djotspot","analyticsAccountId":"UA-75146-12","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/08cb00/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/08cb00/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/08cb00/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/08cb00/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/08cb00/system/app/css/trogedit.css","/site/sonosdebug/_/rsrc/1480551572000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/08cb00/system/app/css/codeeditor.css","/site/sonosdebug/_/rsrc/1480551572000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/sonosdebug","name":"sonosdebug","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":null,"parentWuid":null,"siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"JTAG Connection","locale":"en","wuid":"wuid:gx:2a9cd9c2423335d5","revision":11,"path":"/jtag-connection","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"jtag-connection","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/sonosdebug/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="JTAG Connection - Sonos Debug" />
<meta itemprop="name" content="JTAG Connection - Sonos Debug" />
<meta property="og:title" content="JTAG Connection - Sonos Debug" />
<style type="text/css">
      
      @font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 700;
  src: local('Open Sans Bold Italic'), local('OpenSans-BoldItalic'), url(https://fonts.gstatic.com/s/opensans/v13/PRmiXeptR36kaC0GEAetxp_TkvowlIOtbR7ePgFOpF4.ttf) format('truetype');
}
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: local('Open Sans'), local('OpenSans'), url(https://fonts.gstatic.com/s/opensans/v13/cJZKeOuBrn4kERxqtaUH3aCWcynf_cDxXwCLxiixG1c.ttf) format('truetype');
}
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  src: local('Open Sans Bold'), local('OpenSans-Bold'), url(https://fonts.gstatic.com/s/opensans/v13/k3k702ZOKiLJc3WVjuplzInF5uFdDttMLvmWuJdhhgs.ttf) format('truetype');
}
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  src: local('Open Sans Italic'), local('OpenSans-Italic'), url(https://fonts.gstatic.com/s/opensans/v13/xjAJXh38I15wypJXxuGMBp0EAVxt0G0biEntp43Qt6E.ttf) format('truetype');
}

    
    </style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/08cb00/system/app/themes/ski/standard-css-ski-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1480551572000/system/app/css/overlay.css%3Fcb=ski150goog-ws-leftnone30themedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1480551572000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/sonosdebug/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>JTAG Connection - Sonos Debug</title>
<meta itemprop="image" content="https://sites.google.com/site/sonosdebug/_/rsrc/1419200297919/jtag-connection/jtag-pinout.png" />
<meta property="og:image" content="https://sites.google.com/site/sonosdebug/_/rsrc/1419200297919/jtag-connection/jtag-pinout.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2><a href="index.html" dir="ltr" id="sites-chrome-userheader-title">Sonos Debug</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://sites.google.com/site/sonosdebug/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="home.html" jotId="wuid:gx:3c5c48546c36efba" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="board-to-board-connector.html" jotId="wuid:gx:460a68fe98e85fe0" class="sites-navigation-link">Board-to-Board Connector</a></div></li><li class=""><div class="current-bg" jotId="wuid:gx:2a9cd9c2423335d5" dir="ltr" style="padding-left: 5px;">JTAG Connection</div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="power-topology.html" jotId="wuid:gx:6a73ec9eea89fd82" class="sites-navigation-link">Power Topology</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="serial-port.html" jotId="wuid:gx:9286334f5882564" class="sites-navigation-link">Serial Port</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:5c633c64b454c49a" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
</div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">JTAG Connection</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div style="display:block;text-align:left"><div style="display:block;text-align:left">Sonos PLAY:5 uses this 16-pin JTAG pinout. (See<a href="http://cache.freescale.com/files/soft_dev_tools/doc/user_guide/CWH-UTP-UG.pdf" rel="nofollow"> http://cache.freescale.com/files/soft_dev_tools/doc/user_guide/CWH-UTP-UG.pdf</a>, pg. 21).</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><a href="jtag-connection/jtag-pinout.png%3Fattredirects=0" imageanchor="1"><img border="0" src="_/rsrc/1419200297919/jtag-connection/jtag-pinout.png" /></a></div><br /></div><div style="display:block;text-align:left">A Raspberry Pi can be configured as a JTAG adapter by following the instructions found at <a href="http://sourceforge.net/p/urjtag/discussion/682993/thread/d31f1840/" rel="nofollow">http://sourceforge.net/p/urjtag/discussion/682993/thread/d31f1840/</a>.</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><a href="jtag-connection/IMG_20141221_123542.jpg%3Fattredirects=0" imageanchor="1"><img border="0" height="400" src="_/rsrc/1419200003598/jtag-connection/IMG_20141221_123542.jpg%3Fheight=400&amp;width=300" width="300" /></a></div><div style="display:block;text-align:left"><a href="jtag-connection/IMG_20141221_123727.jpg%3Fattredirects=0" imageanchor="1"><img border="0" height="299" src="_/rsrc/1419199999503/jtag-connection/IMG_20141221_123727.jpg%3Fheight=299&amp;width=400" width="400" /></a></div><div><br /></div><div>You can check out my patched version of UrJTAG from here:</div><div><br /></div><div><font face="courier new, monospace">git clone https://github.com/bgelb/urjtag.git</font></div><div><br /></div><div>Many thanks to Laurent Pinchart for sharing his MPC8272 patches with me. I fixed them up (since they no longer applied to UrJTAG at head anymore) a bit and plan to contribute them back to UrJTAG when I have a chance.</div><br /><div>Using my patches, UrJTAG output looks like this:</div><div><br /></div><div><div><font face="courier new, monospace" size="1">jtag&gt; cable gpio tdo=9 tdi=10 tck=11 tms=25</font></div><div><font face="courier new, monospace" size="1">Initializing GPIO JTAG Chain</font></div><div><font face="courier new, monospace" size="1">jtag&gt; detect</font></div><div><font face="courier new, monospace" size="1">IR length: 8</font></div><div><font face="courier new, monospace" size="1">Chain length: 1</font></div><div><font face="courier new, monospace" size="1">Device Id: 00000001100011001101000000011101 (0x018CD01D)</font></div><div><font face="courier new, monospace" size="1">  Manufacturer: Freescale (Motorola) (0x01D)</font></div><div><font face="courier new, monospace" size="1">  Part(0):      mpc8247 (0x18CD)</font></div><div><font face="courier new, monospace" size="1">  Stepping:     0</font></div><div><font face="courier new, monospace" size="1">  Filename:     /usr/local/share/urjtag/freescale/mpc8247/mpc8247</font></div></div><div><div style="font-family:courier new,monospace"><font size="1">jtag&gt; initbus mpc8272</font></div><div style="font-family:courier new,monospace"><font size="1">jtag&gt; print</font></div><div style="font-family:courier new,monospace"><font size="1"> No. Manufacturer              Part                 Stepping Instruction          Register                        </font></div><div style="font-family:courier new,monospace"><font size="1">-------------------------------------------------------------------------------------------------------------------</font></div><div style="font-family:courier new,monospace"><font size="1">   0 Freescale (Motorola)      mpc8247              0        SAMPLE/PRELOAD       BSR                             </font></div><div style="font-family:courier new,monospace"><font size="1"><br /></font></div><div style="font-family:courier new,monospace"><font size="1">Active bus:</font></div><div style="font-family:courier new,monospace"><font size="1">*0: Freescale MPC8272 compatible bus driver via BSR (JTAG part No. 0)</font></div><div style="font-family:courier new,monospace"><font size="1"><span style="white-space:pre"> </span>start: 0x00000000, length: 0x10000000, data width: 8 bit, (EEPROM)</font></div><div style="font-family:courier new,monospace"><font size="1"><span style="white-space:pre"> </span>start: 0x10000000, length: 0x10000000, data width: 8 bit, (Flash)</font></div><div style="font-family:courier new,monospace"><br /></div><div style="font-family:courier new,monospace"><br /></div><div><font face="arial, sans-serif">Then the boot (Flash) EEPROM can be accessed like this:</font></div></div><div><div><font face="courier new, monospace" size="1">jtag&gt; peek 0x0</font></div><div><font face="courier new, monospace" size="1">URJ_BUS_READ(0x00000000) = 0x04 (4)</font></div><div><div><font face="courier new, monospace" size="1">jtag&gt; peek 0x8</font></div><div><font face="courier new, monospace" size="1">URJ_BUS_READ(0x00000008) = 0x42 (66)</font></div><div><font face="courier new, monospace" size="1">jtag&gt; peek 0x10</font></div><div><font face="courier new, monospace" size="1">URJ_BUS_READ(0x00000010) = 0x42 (66)</font></div><div><font face="courier new, monospace" size="1">jtag&gt; peek 0x18</font></div><div><font face="courier new, monospace" size="1">URJ_BUS_READ(0x00000018) = 0x1A (26)</font></div></div></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">Or a chunk of memory can be dumped like this:</font></div><div><div><font face="courier new, monospace" size="1">jtag&gt; readmem 0x0 1024 first1k.bin</font></div><div><font face="courier new, monospace" size="1">address: 0x00000000</font></div><div><font face="courier new, monospace" size="1">length:  0x00000400</font></div><div><font face="courier new, monospace" size="1">reading:</font></div><div><font face="courier new, monospace" size="1">addr: 0x00000400</font></div><div><font face="courier new, monospace" size="1">Done.</font></div></div><div><font face="courier new, monospace" size="1"><br /></font></div><div><font face="arial, sans-serif" size="2"><span style="line-height:15px">Some software work will be needed to enable any access to the 32Mbit NAND Flash part on the Sonos. It will not work in the current configuration (though CS2 is mapped to an address range).</span></font></div><div><font face="arial, sans-serif" size="2"><span style="line-height:15px"><br /></span></font></div><div><font face="arial, sans-serif" size="2"><span style="line-height:15px">Initially "detectflash" would not detect the NOR flash part used for bootup and I could not manually read the device and mfr IDs by poking in the necessary command cycles. Eventually I determined that the WE# pin on the NOR flash was not connected (just pulled up to 3.3V). There is a stuff option on the PCB that needs to be stuffed in order to connect WE# to </span></font><span style="background-color:transparent;line-height:15px"><font face="arial, sans-serif" size="2">WE_DQM_BS_B(0). R25159 must be stuffed w/ 0-ohm. See the below picture.</font></span></div><div><span style="background-color:transparent;line-height:15px"><font face="arial, sans-serif" size="2"><br /></font></span></div><div><span style="background-color:transparent;line-height:15px"><font face="arial, sans-serif" size="2"><div style="display:block;text-align:left"><a href="jtag-connection/IMG_20150103_181307.jpg%3Fattredirects=0" imageanchor="1"><img border="0" height="400" src="_/rsrc/1420343194884/jtag-connection/IMG_20150103_181307.jpg%3Fheight=400&amp;width=300" width="300" /></a></div><br /></font></span></div><div><span style="background-color:transparent;line-height:15px"><font face="arial, sans-serif" size="2">Once R25159 is stuffed (and my urjtag patches are applied, since I had to add a definition for the EN29LV010), the detectflash command works:</font></span></div><div><span style="background-color:transparent;line-height:15px"><font face="arial, sans-serif" size="2"><br /></font></span></div><div><span style="background-color:transparent"><div><span style="line-height:15px"><font face="courier new, monospace" size="1">jtag&gt; detectflash 0x0</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">dev ID=006e   man ID=001c</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">Found EON EN29LV010 flash,  size = 131072 bytes.</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">Query identification string:</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Primary Algorithm Command Set and Control Interface ID Code: 0x0002 (AMD/Fujitsu Standard Command Set)</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Alternate Algorithm Command Set and Control Interface ID Code: 0x0000 (null)</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">Query system interface information:</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Vcc Logic Supply Minimum Write/Erase or Write voltage: 0 mV</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Vcc Logic Supply Maximum Write/Erase or Write voltage: 0 mV</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Vpp [Programming] Supply Minimum Write/Erase voltage: 0 mV</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Vpp [Programming] Supply Maximum Write/Erase voltage: 0 mV</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Typical timeout per single byte/word program: 0 us</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Typical timeout for maximum-size multi-byte program: 0 us</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Typical timeout per individual block erase: 0 ms</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Typical timeout for full chip erase: 0 ms</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Maximum timeout for byte/word program: 0 us</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Maximum timeout for multi-byte program: 0 us</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Maximum timeout per individual block erase: 0 ms</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Maximum timeout for chip erase: 0 ms</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">Device geometry definition:</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Device Size: 131072 B (128 KiB, 0 MiB)</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Flash Device Interface Code description: 0x0000 (x8)</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Maximum number of bytes in multi-byte program: 0</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Number of Erase Block Regions within device: 1</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">        Erase Block Region Information:</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">                Region 0:</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">                        Erase Block Size: 16384 B (16 KiB)</font></span></div><div><span style="line-height:15px"><font face="courier new, monospace" size="1">                        Number of Erase Blocks: 8</font></span></div><div style="font-size:small;font-family:arial,sans-serif;line-height:15px"><br /></div><div style="font-size:small;font-family:arial,sans-serif;line-height:15px">I replaced the EN29LV010 on my board with a Microchip SST39LF010. There is a subtle difference in the command set (need to send 0x5555/0x2aaa vs. 0x555/0x2aa on the addr pins during command sequence) which I hacked UrJTAG (for now) to do. Longer term, need to add proper support for this flash chip type.</div><div style="font-size:small;font-family:arial,sans-serif;line-height:15px"><br /></div><div style="font-size:small;font-family:arial,sans-serif;line-height:15px">I was able to program the new flash chip with UrJTAG and the bootloader now loads successfully.</div><div style="font-size:small;font-family:arial,sans-serif;line-height:15px"><br /></div><div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">jtag&gt; flashmem 0x0 sonos5-boot-rom-cold.bin </span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">Chip: AMD Flash</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><span style="white-space:pre"> </span>Manufacturer: SST</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><span style="white-space:pre"> </span>Chip: SST39LF010</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><span style="white-space:pre"> </span>Protected: 0001</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">program:</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00000000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 0 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00000000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00000000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 0: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00004000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 1 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00004000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00004000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 1: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00008000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 2 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00008000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00008000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 2: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x0000C000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 3 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x0000C000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x0000C000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 3: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00010000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 4 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00010000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00010000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 4: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00014000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 5 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00014000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00014000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 5: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x00018000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 6 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00018000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x00018000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 6: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_unlock_block 0x0001C000 IGNORE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px"><br /></span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">block 7 unlocked</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x0001C000</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">flash_erase_block 0x0001C000 DONE</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">erasing block 7: 0</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">addr: 0x0001FFFF</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">verify:</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">addr: 0x0001FFFF</span></font></div><div><font face="courier new, monospace" size="1"><span style="line-height:15px">Done.</span></font></div><div style="font-family:arial,sans-serif;font-size:small;line-height:15px"><br /></div></div></span></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?continue=https://sites.google.com/site/sonosdebug/jtag-connection&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/08cb00/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/site/sonosdebug/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", true);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXuLB3OTFb-t8_y-6GSB51Yn72OnnwhdMBka5jLiNnVdmmlgXBY92GxjKuxiJBuvvOS2wFFLj8-032bIXi-HEHF5tZbgILbz8IMXJ3GhLFjyzg3o9E5DEpCBaN58F2Opjujf477N/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('https://sites.google.com/site/sonosdebug/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            true);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
